# 快速编译指南 - Linux 用户

## 当前情况

✅ **已配置**：Theos、iOS SDK、所有工具  
❌ **限制**：xcodebuild 仅在 macOS 可用，无法在 Linux 直接编译

## 推荐方案：使用 GitHub Actions（最简单）

项目已配置自动构建，只需：

### 1. 提交代码到 GitHub

```bash
cd /home/pets/桌面/NewTerm-main

# 检查修改
git status

# 添加所有修改（包括我们刚才的 UI 卡顿修复）
git add .

# 提交
git commit -m "修复 UI 卡顿问题：限制更新行数，批量处理更新"

# 推送到 GitHub（如果没有远程仓库，需要先添加）
git remote -v  # 查看远程仓库
# 如果没有，添加远程仓库：
# git remote add origin <你的GitHub仓库URL>
git push origin main  # 或 master，取决于你的分支名
```

### 2. 等待自动构建

1. 打开 GitHub 仓库页面
2. 点击 "Actions" 标签页
3. 查看构建进度
4. 构建完成后，在 Actions 页面下载 `.deb` 文件

### 3. 安装到设备

```bash
# 将 .deb 文件传输到越狱设备
scp NewTerm_*.deb root@设备IP:/tmp/

# SSH 连接到设备并安装
ssh root@设备IP
dpkg -i /tmp/NewTerm_*.deb
# 或者
apt install /tmp/NewTerm_*.deb
```

## 替代方案：在 macOS 上编译

如果你有 Mac 或可以访问 macOS：

```bash
# 1. 克隆项目
git clone <仓库URL>
cd NewTerm-main

# 2. 使用 Xcode
open NewTerm.xcodeproj
# 然后在 Xcode 中点击 Build

# 或者使用命令行
xcodebuild -project NewTerm.xcodeproj \
           -scheme "NewTerm (iOS)" \
           -configuration Release
```

## 在 Linux 上的限制说明

**为什么不能直接编译？**

1. **xcodebuild** 是 Apple 专有工具，只能在 macOS 上运行
2. 项目使用 `xcodeproj.mk`，它内部调用 `xcodebuild`
3. 虽然你有 iOS SDK 和 Swift 编译器，但缺少构建系统的关键组件

**可以做什么？**
- ✅ 编辑代码
- ✅ 版本控制（Git）
- ✅ 语法检查
- ✅ 使用 GitHub Actions 自动构建

## 快速命令

```bash
# 检查环境
cd /home/pets/桌面/NewTerm-main
export THEOS=/home/pets/theos
./check_theos_env.sh

# 查看修改
git status
git diff

# 提交并推送（触发 GitHub Actions 构建）
git add .
git commit -m "你的提交信息"
git push
```

## 下一步

现在你的代码修改（UI 卡顿修复）已经完成：

1. ✅ 修复了 TerminalController.swift 中的批量更新逻辑
2. ✅ 限制了每次更新的行数
3. ✅ 添加了异步处理机制

**建议操作**：
- 如果这是本地修改，提交到 GitHub 触发自动构建
- 如果需要测试，在设备上安装构建好的 .deb 包
- 可以继续在 Linux 上编辑代码，使用 GitHub Actions 构建

