# NewTerm 编译说明

## 当前情况

✅ **已安装**: Theos  
❌ **缺少**: Xcode 工具链（xcodebuild）  
❌ **缺少**: iOS SDK  
❌ **缺少**: Swift 编译器

## 问题分析

从构建尝试可以看出，项目依赖：
1. **xcodebuild**: Apple 的构建工具，只能在 macOS 上运行
2. **iOS SDK**: iOS 应用开发的必需 SDK
3. **Swift 编译器**: 编译 Swift 代码需要

这些工具在 Linux 上**无法直接获得**，因为：
- iOS SDK 是 Apple 专有软件，只能通过 macOS 的 Xcode 获得
- xcodebuild 是 Xcode 的一部分，只能在 macOS 上运行

## 可行的解决方案

### 方案 1: 使用 GitHub Actions（推荐）✨

项目已经配置了 GitHub Actions，可以自动在云端 macOS 环境中构建：

1. **提交代码到 GitHub**:
```bash
git add .
git commit -m "修复 UI 卡顿问题"
git push
```

2. **GitHub 会自动构建**:
   - 在 `.github/workflows/build.yml` 中已配置
   - 使用 macOS 运行器
   - 自动安装依赖并构建

3. **下载构建产物**:
   - 在 GitHub Actions 页面下载构建好的 `.deb` 包

### 方案 2: 在 macOS 上构建

如果你有 Mac 或可以访问 macOS：

```bash
# 1. 克隆项目
git clone <repository-url>
cd NewTerm-main

# 2. 打开 Xcode
open NewTerm.xcodeproj

# 3. 或者使用命令行构建
xcodebuild -project NewTerm.xcodeproj -scheme "NewTerm (iOS)" -configuration Release
```

### 方案 3: 安装到越狱设备

如果目标设备已越狱，可以使用 Theos 直接安装：

```bash
# 在 macOS 或配置好完整环境的 Linux 上
export THEOS=/home/pets/theos
export THEOS_DEVICE_IP=<设备IP>
export THEOS_DEVICE_PORT=22
make do
```

## 当前在 Linux 上的限制

❌ **无法完成完整构建**，因为缺少：
- iOS SDK（UIKit、SwiftUI 等框架）
- xcodebuild 工具
- 代码签名工具

✅ **可以做的事情**:
- 编辑和修改代码
- 使用 Git 版本控制
- 提交到 GitHub 使用自动构建
- 检查代码语法（如果安装 Swift）

## 推荐的工作流程

1. **在 Linux 上开发**:
   - 编辑代码
   - 使用 Git 管理版本

2. **使用 GitHub Actions 构建**:
   - 推送代码到 GitHub
   - 自动在 macOS 环境中构建

3. **测试构建产物**:
   - 下载 GitHub Actions 构建的 `.deb` 包
   - 在越狱设备上安装测试

## 总结

虽然 Theos 可以在 Linux 上安装，但**完整编译 iOS 应用仍然需要 macOS 环境**。

**最佳实践**:
- 在 Linux 上开发和修改代码 ✅
- 使用 GitHub Actions 自动构建 ✅
- 在 macOS 本地构建（如果有 Mac）✅
- 直接在 Linux 上完整构建 ❌（缺少必要工具）

## 已完成的代码修复

✅ 已修复 UI 卡顿问题：
- 添加了批量更新机制
- 限制了每次更新的行数
- 实现了延迟处理机制

这些修改已经完成，现在只需要在 macOS 环境（通过 GitHub Actions 或本地 Mac）中构建即可！

